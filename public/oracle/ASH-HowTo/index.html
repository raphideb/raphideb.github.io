<!DOCTYPE html>
<html
  lang="en"
  class="color-toggle-hidden"
  
>
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8" />
<meta name="referrer" content="no-referrer" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="color-scheme" content="light dark" />
<meta name="generator" content="Hugo 0.147.9">


  <meta name="description" content=" ASH HowTo DT Database Services Exported on 07/07/2025
Table of Contents Introduction Useful Tables and Views ASH Basics Description of Fields As of 19c Useful Fields Checking ASH Time Range Saving ASH ASH Scripts Basic Script From ASH From DASH Mapping to User and Object Name Limiting Time Range Limiting Number of Rows Drilldown Blocking Session Specific Query Queries of a PL/SQL Procedure Specific Events Event Parameters Other Useful Filters More ASH Queries PGA Usage TEMP Usage 1. Introduction The view (g)v$active_session_history (ASH) records the wait events of all active sessions in memory every second. Since the memory for ASH is limited, the data is only available for a few hours. Therefore, 10% of the ASH data is written to the view dba_hist_active_sess_history (DASH) and is permanently available. The live view of Enterprise Manager is based on ASH data, AWR reports are based on DBA_HIST_* views." />

    <title>Ash How To | raphi&#39;s corner</title>

    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
<link
  rel="icon"
  type="image/png"
  sizes="32x32"
  href="/favicon/favicon-32x32.png"
/>
<link
  rel="icon"
  type="image/png"
  sizes="16x16"
  href="/favicon/favicon-16x16.png"
/>

    

    
  <meta
    property="og:title"
    content="Ash How To"
  />
  <meta property="og:site_name" content="raphi's corner" />
  <meta property="og:description" content=" ASH HowTo DT Database Services Exported on 07/07/2025
Table of Contents Introduction Useful Tables and Views ASH Basics Description of Fields As of 19c Useful Fields Checking ASH Time Range Saving ASH ASH Scripts Basic Script From ASH From DASH Mapping to User and Object Name Limiting Time Range Limiting Number of Rows Drilldown Blocking Session Specific Query Queries of a PL/SQL Procedure Specific Events Event Parameters Other Useful Filters More ASH Queries PGA Usage TEMP Usage 1. Introduction The view (g)v$active_session_history (ASH) records the wait events of all active sessions in memory every second. Since the memory for ASH is limited, the data is only available for a few hours. Therefore, 10% of the ASH data is written to the view dba_hist_active_sess_history (DASH) and is permanently available. The live view of Enterprise Manager is based on ASH data, AWR reports are based on DBA_HIST_* views." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/oracle/ASH-HowTo/" />

<meta property="article:section" content="Oracle" />


  <meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Ash How To" />
  <meta name="twitter:description" content=" ASH HowTo DT Database Services Exported on 07/07/2025
Table of Contents Introduction Useful Tables and Views ASH Basics Description of Fields As of 19c Useful Fields Checking ASH Time Range Saving ASH ASH Scripts Basic Script From ASH From DASH Mapping to User and Object Name Limiting Time Range Limiting Number of Rows Drilldown Blocking Session Specific Query Queries of a PL/SQL Procedure Specific Events Event Parameters Other Useful Filters More ASH Queries PGA Usage TEMP Usage 1. Introduction The view (g)v$active_session_history (ASH) records the wait events of all active sessions in memory every second. Since the memory for ASH is limited, the data is only available for a few hours. Therefore, 10% of the ASH data is written to the view dba_hist_active_sess_history (DASH) and is permanently available. The live view of Enterprise Manager is based on ASH data, AWR reports are based on DBA_HIST_* views." />


  <script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "TechArticle",
      "articleSection": "Oracle",
      "name": "Ash How To",
      "url" : "http://localhost:1313/oracle/ASH-HowTo/",
      "headline": "Ash How To",
      "description": " ASH HowTo DT Database Services Exported on 07\/07\/2025\nTable of Contents Introduction Useful Tables and Views ASH Basics Description of Fields As of 19c Useful Fields Checking ASH Time Range Saving ASH ASH Scripts Basic Script From ASH From DASH Mapping to User and Object Name Limiting Time Range Limiting Number of Rows Drilldown Blocking Session Specific Query Queries of a PL\/SQL Procedure Specific Events Event Parameters Other Useful Filters More ASH Queries PGA Usage TEMP Usage 1. Introduction The view (g)v$active_session_history (ASH) records the wait events of all active sessions in memory every second. Since the memory for ASH is limited, the data is only available for a few hours. Therefore, 10% of the ASH data is written to the view dba_hist_active_sess_history (DASH) and is permanently available. The live view of Enterprise Manager is based on ASH data, AWR reports are based on DBA_HIST_* views.",
      "wordCount" : "1891",
      "inLanguage": "en",
      "isFamilyFriendly": "true",
      "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "http://localhost:1313/oracle/ASH-HowTo/"
      },
      "copyrightHolder" : "raphi\u0027s corner",
      "copyrightYear" : "0001",
      "dateCreated": "0001-01-01T00:00:00.00Z",
      "datePublished": "0001-01-01T00:00:00.00Z",
      "dateModified": "0001-01-01T00:00:00.00Z",
      "publisher":{
          "@type":"Organization",
          "name": "raphi's corner",
          "url": "http://localhost:1313/",
          "logo": {
              "@type": "ImageObject",
              "url": "http://localhost:1313/brand.svg",
              "width":"32",
              "height":"32"
          }
      }
  }
  </script>


    
  <script src="/js/colortheme-05deda6f.bundle.min.js"></script>
<script src="/js/main-c5dd8165.bundle.min.js"></script>

<link
  rel="preload"
  as="font"
  href="/fonts/Metropolis.woff2"
  type="font/woff2"
  crossorigin="anonymous"
/>
<link
  rel="preload"
  as="font"
  href="/fonts/LiberationSans.woff2"
  type="font/woff2"
  crossorigin="anonymous"
/>

<link
  rel="preload"
  href="/main-b53472e8.min.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="/main-b53472e8.min.css"
  media="all"
/>

<link
  rel="preload"
  href="/mobile-7885c8a8.min.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="/mobile-7885c8a8.min.css"
  media="screen and (max-width: 45rem)"
/>

<link
  rel="preload"
  href="/print-72068949.min.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="/print-72068949.min.css"
  media="print"
/>

<link
  rel="preload"
  href="/custom.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="/custom.css"
  media="all"
/>
  <link href="http://localhost:1313/oracle/ASH-HowTo/" rel="canonical" type="text/html" />

<!-- Made with Geekdoc theme https://github.com/thegeeklab/hugo-geekdoc -->

    <link rel="stylesheet" type="text/css" href="/css/custom.css" />

  </head>

  <body itemscope itemtype="https://schema.org/WebPage">
    <div class="w-full flex justify-center">
      <a href="#main-content" id="gdoc-to-main" class="gdoc-markdown__link">Skip to main content</a>
    </div>

    
  <!-- geekdoc include: /sprites/geekdoc.svg -->
  <svg class="svg-sprite" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_arrow_back" xmlns="http://www.w3.org/2000/svg"><path d="M24 10.526v2.947H5.755l8.351 8.421-2.105 2.105-12-12 12-12 2.105 2.105-8.351 8.421H24z"/></svg><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_arrow_left_alt" xmlns="http://www.w3.org/2000/svg"><path d="M5.965 10.526V6.035L0 12l5.965 5.965v-4.491H24v-2.947H5.965z"/></svg><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_arrow_right_alt" xmlns="http://www.w3.org/2000/svg"><path d="M18.035 10.526V6.035L24 12l-5.965 5.965v-4.491H0v-2.947h18.035z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_bitbucket" xmlns="http://www.w3.org/2000/svg"><path d="M15.905 13.355c.189 1.444-1.564 2.578-2.784 1.839-1.375-.602-1.375-2.784-.034-3.403 1.151-.705 2.818.223 2.818 1.564zm1.907-.361c-.309-2.44-3.076-4.056-5.328-3.042-1.426.636-2.389 2.148-2.32 3.747.086 2.097 2.08 3.815 4.176 3.626s3.729-2.234 3.472-4.331zm4.108-9.315c-.756-.997-2.045-1.169-3.179-1.358-3.214-.516-6.513-.533-9.727.034-1.066.172-2.269.361-2.939 1.323 1.1 1.031 2.664 1.186 4.073 1.358 2.544.327 5.156.344 7.699.017 1.426-.172 3.008-.309 4.073-1.375zm.979 17.788c-.481 1.684-.206 3.953-1.994 4.932-3.076 1.701-6.806 1.89-10.191 1.289-1.787-.327-3.884-.894-4.864-2.578-.43-1.65-.705-3.334-.98-5.018l.103-.275.309-.155c5.121 3.386 12.288 3.386 17.427 0 .808.241.206 1.22.189 1.805zM26.01 4.951c-.584 3.764-1.255 7.51-1.908 11.257-.189 1.1-1.255 1.719-2.148 2.183-3.214 1.615-6.96 1.89-10.483 1.512-2.389-.258-4.829-.894-6.771-2.389-.911-.705-.911-1.908-1.083-2.922-.602-3.523-1.289-7.046-1.719-10.604.206-1.547 1.942-2.217 3.231-2.698C6.848.654 8.686.362 10.508.19c3.884-.378 7.854-.241 11.618.859 1.341.395 2.784.945 3.695 2.097.412.533.275 1.203.189 1.805z"/></svg><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_bookmark" xmlns="http://www.w3.org/2000/svg"><path d="M15.268 4.392q.868 0 1.532.638t.664 1.506v17.463l-7.659-3.268-7.608 3.268V6.536q0-.868.664-1.506t1.532-.638h10.876zm4.34 14.144V4.392q0-.868-.638-1.532t-1.506-.664H6.537q0-.868.664-1.532T8.733 0h10.876q.868 0 1.532.664t.664 1.532v17.412z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_brightness_auto" xmlns="http://www.w3.org/2000/svg"><path d="M16.846 18.938h2.382L15.22 7.785h-2.44L8.772 18.938h2.382l.871-2.44h3.95zm7.087-9.062L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809zm-11.385 4.937L14 10.282l1.452 4.531h-2.904z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_brightness_dark" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079 0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565q-1.51 0-3.079.697 1.917.871 3.108 2.701T15.22 14t-1.191 4.037-3.108 2.701q1.568.697 3.079.697zm9.933-11.559L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_brightness_light" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079 0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565 8.743 8.743 6.565 14t2.178 5.257T14 21.435zm9.933-3.311v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809L27.999 14z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_check" xmlns="http://www.w3.org/2000/svg"><path d="M8.885 20.197 25.759 3.323l2.24 2.24L8.885 24.677 0 15.792l2.24-2.24z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_check_circle_outline" xmlns="http://www.w3.org/2000/svg"><path d="M14 25.239q4.601 0 7.92-3.319T25.239 14 21.92 6.08 14 2.761 6.08 6.08 2.761 14t3.319 7.92T14 25.239zM14 0q5.784 0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0zm6.441 7.822 1.972 1.972-11.239 11.239L4.207 14l1.972-1.972 4.995 4.995z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_cloud_off" xmlns="http://www.w3.org/2000/svg"><path d="M9.023 10.5H7q-1.914 0-3.281 1.395t-1.367 3.309 1.367 3.281T7 19.852h11.375zM3.5 4.976l1.477-1.477L24.5 23.022l-1.477 1.477-2.352-2.297H6.999q-2.898 0-4.949-2.051t-2.051-4.949q0-2.844 1.969-4.867t4.758-2.133zm19.086 5.578q2.242.164 3.828 1.832T28 16.351q0 3.008-2.461 4.758l-1.695-1.695q1.805-.984 1.805-3.063 0-1.422-1.039-2.461t-2.461-1.039h-1.75v-.602q0-2.68-1.859-4.539t-4.539-1.859q-1.531 0-2.953.711l-1.75-1.695Q11.431 3.5 14.001 3.5q2.953 0 5.496 2.078t3.09 4.977z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_code" xmlns="http://www.w3.org/2000/svg"><path d="M9.917 24.5a1.75 1.75 0 1 0-3.501.001 1.75 1.75 0 0 0 3.501-.001zm0-21a1.75 1.75 0 1 0-3.501.001A1.75 1.75 0 0 0 9.917 3.5zm11.666 2.333a1.75 1.75 0 1 0-3.501.001 1.75 1.75 0 0 0 3.501-.001zm1.75 0a3.502 3.502 0 0 1-1.75 3.026c-.055 6.581-4.721 8.039-7.82 9.023-2.898.911-3.846 1.349-3.846 3.117v.474a3.502 3.502 0 0 1 1.75 3.026c0 1.932-1.568 3.5-3.5 3.5s-3.5-1.568-3.5-3.5c0-1.294.711-2.424 1.75-3.026V6.526A3.502 3.502 0 0 1 4.667 3.5c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5a3.502 3.502 0 0 1-1.75 3.026v9.06c.93-.456 1.914-.766 2.807-1.039 3.391-1.075 5.323-1.878 5.359-5.687a3.502 3.502 0 0 1-1.75-3.026c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_copy" xmlns="http://www.w3.org/2000/svg"><path d="M23.502 25.438V7.626H9.562v17.812h13.94zm0-20.315q1.013 0 1.787.745t.774 1.757v17.812q0 1.013-.774 1.787t-1.787.774H9.562q-1.013 0-1.787-.774t-.774-1.787V7.625q0-1.013.774-1.757t1.787-.745h13.94zM19.689 0v2.562H4.438v17.812H1.936V2.562q0-1.013.745-1.787T4.438.001h15.251z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_dangerous" xmlns="http://www.w3.org/2000/svg"><path d="M21.802 19.833 15.969 14l5.833-5.833-1.969-1.969L14 12.031 8.167 6.198 6.198 8.167 12.031 14l-5.833 5.833 1.969 1.969L14 15.969l5.833 5.833zM19.833 0 28 8.167v11.666L19.833 28H8.167L0 19.833V8.167L8.167 0h11.666z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_date" xmlns="http://www.w3.org/2000/svg"><path d="M27.192 28.844V11.192H4.808v17.652h22.384zm0-25.689q1.277 0 2.253.976t.976 2.253v22.459q0 1.277-.976 2.216t-2.253.939H4.808q-1.352 0-2.291-.901t-.939-2.253V6.385q0-1.277.939-2.253t2.291-.976h1.577V.001h3.23v3.155h12.769V.001h3.23v3.155h1.577zm-3.155 11.267v3.155h-3.23v-3.155h3.23zm-6.46 0v3.155h-3.155v-3.155h3.155zm-6.384 0v3.155h-3.23v-3.155h3.23z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_download" xmlns="http://www.w3.org/2000/svg"><path d="M2.866 28.209h26.269v3.79H2.866v-3.79zm26.268-16.925L16 24.418 2.866 11.284h7.493V.001h11.283v11.283h7.493z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_email" xmlns="http://www.w3.org/2000/svg"><path d="M28.845 9.615v-3.23L16 14.422 3.155 6.385v3.23L16 17.577zm0-6.46q1.277 0 2.216.977T32 6.385v19.23q0 1.277-.939 2.253t-2.216.977H3.155q-1.277 0-2.216-.977T0 25.615V6.385q0-1.277.939-2.253t2.216-.977h25.69z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_error_outline" xmlns="http://www.w3.org/2000/svg"><path d="M14 25.239q4.601 0 7.92-3.319T25.239 14 21.92 6.08 14 2.761 6.08 6.08 2.761 14t3.319 7.92T14 25.239zM14 0q5.784 0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0zm-1.38 6.967h2.761v8.413H12.62V6.967zm0 11.239h2.761v2.826H12.62v-2.826z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_fire" xmlns="http://www.w3.org/2000/svg"><path d="M17.689 21.998q-.32.32-.8.576t-.864.384q-1.152.384-2.272.032t-1.888-.992q-.128-.128-.096-.256t.16-.192q1.216-.384 1.92-1.216t.96-1.792q.192-.896-.064-1.728t-.384-1.728q-.128-.704-.096-1.376t.288-1.312q0-.128.128-.128t.192.064q.384.832.992 1.472t1.28 1.216 1.216 1.248.672 1.568q.064.384.064.704.064.96-.32 1.92t-1.088 1.536zm3.84-10.944q-.768-.704-1.6-1.28t-1.6-1.344q-1.536-1.536-2.016-3.584t.16-4.16q.128-.32-.096-.544t-.544-.096q-.768.32-1.44.768t-1.312.896q-1.984 1.664-3.136 3.936T8.633 10.51t.8 5.088q0 .128.032.256t.032.256q0 .576-.512.832t-1.024-.192q-.128-.192-.192-.32-1.024-1.28-1.376-2.912t-.096-3.232q.064-.384-.288-.576t-.608.128q-1.28 1.664-1.856 3.68t-.448 4.064q0 .576.096 1.184t.288 1.184q.448 1.536 1.216 2.816 1.216 2.048 3.264 3.424t4.416 1.696q2.496.32 5.024-.256t4.448-2.304q1.408-1.344 2.208-3.104t.864-3.68-.704-3.712q-.064-.128-.096-.224t-.096-.224q-.576-1.088-1.28-1.984-.256-.384-.544-.704t-.672-.64z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_git" xmlns="http://www.w3.org/2000/svg"><path d="M27.472 12.753 15.247.529a1.803 1.803 0 0 0-2.55 0l-2.84 2.84 2.137 2.137a2.625 2.625 0 0 1 3.501 3.501l3.499 3.499a2.625 2.625 0 1 1-1.237 1.237l-3.499-3.499c-.083.04-.169.075-.257.106v7.3a2.626 2.626 0 1 1-1.75 0v-7.3a2.626 2.626 0 0 1-1.494-3.607L8.62 4.606l-8.09 8.09a1.805 1.805 0 0 0 0 2.551l12.225 12.224a1.803 1.803 0 0 0 2.55 0l12.168-12.168a1.805 1.805 0 0 0 0-2.551z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_gitea" xmlns="http://www.w3.org/2000/svg"><path d="M5.581 7.229c-2.46-.005-5.755 1.559-5.573 5.48.284 6.125 6.56 6.693 9.068 6.743.275 1.149 3.227 5.112 5.412 5.32h9.573c5.741-.381 10.04-17.363 6.853-17.427-5.271.248-8.395.373-11.073.395v5.3l-.835-.369-.005-4.928c-3.075-.001-5.781-.144-10.919-.397-.643-.004-1.539-.113-2.501-.116zm.348 2.166h.293c.349 3.14.917 4.976 2.067 7.781-2.933-.347-5.429-1.199-5.888-4.38-.237-1.647.563-3.365 3.528-3.401zm11.409 3.087c.2.003.404.04.596.128l.999.431-.716 1.305h-.007a.996.996 0 0 0-.321.053l.006-.002c-.349.114-.593.406-.593.749 0 .097.019.189.055.275l-.002-.006a.767.767 0 0 0 .151.233l-.001-.001-1.235 2.248a.99.99 0 0 0-.302.052l.006-.002c-.349.114-.593.406-.593.749 0 .097.019.189.055.275l-.002-.006c.128.31.457.527.843.527a.987.987 0 0 0 .31-.049l-.006.002c.348-.114.592-.406.592-.749 0-.097-.02-.19-.056-.277l.002.006a.784.784 0 0 0-.211-.293l1.203-2.189a.999.999 0 0 0 .397-.041l-.006.002a.942.942 0 0 0 .285-.15l-.001.001c.464.195.844.353 1.117.488.411.203.556.337.6.487.044.147-.004.429-.236.925-.173.369-.46.893-.799 1.511h-.02a.991.991 0 0 0-.321.053l.006-.002c-.349.114-.593.406-.593.749 0 .097.019.189.055.275l-.002-.006c.128.31.457.527.843.527a.987.987 0 0 0 .31-.049l-.006.002c.348-.114.592-.406.592-.749a.703.703 0 0 0-.055-.275l.002.006a.802.802 0 0 0-.183-.27l.001.001c.335-.611.623-1.136.808-1.531.251-.536.381-.935.267-1.32s-.467-.636-.933-.867c-.307-.151-.689-.311-1.147-.503a.723.723 0 0 0-.052-.324l.002.006a.792.792 0 0 0-.194-.279l.704-1.284 3.899 1.684c.704.305.995 1.053.653 1.68l-2.68 4.907c-.343.625-1.184.884-1.888.58l-5.516-2.384c-.704-.304-.996-1.053-.653-1.68l2.68-4.905c.235-.431.707-.687 1.207-.707z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_github" xmlns="http://www.w3.org/2000/svg"><path d="M16 .394c8.833 0 15.999 7.166 15.999 15.999 0 7.062-4.583 13.062-10.937 15.187-.813.146-1.104-.354-1.104-.771 0-.521.021-2.25.021-4.396 0-1.5-.5-2.458-1.083-2.958 3.562-.396 7.312-1.75 7.312-7.896 0-1.75-.625-3.167-1.646-4.291.167-.417.708-2.042-.167-4.25-1.333-.417-4.396 1.646-4.396 1.646a15.032 15.032 0 0 0-8 0S8.937 6.602 7.603 7.018c-.875 2.208-.333 3.833-.167 4.25-1.021 1.125-1.646 2.542-1.646 4.291 0 6.125 3.729 7.5 7.291 7.896-.458.417-.875 1.125-1.021 2.146-.917.417-3.25 1.125-4.646-1.333-.875-1.521-2.458-1.646-2.458-1.646-1.562-.021-.104.979-.104.979 1.042.479 1.771 2.333 1.771 2.333.938 2.854 5.396 1.896 5.396 1.896 0 1.333.021 2.583.021 2.979 0 .417-.292.917-1.104.771C4.582 29.455-.001 23.455-.001 16.393-.001 7.56 7.165.394 15.998.394zM6.063 23.372c.042-.083-.021-.187-.146-.25-.125-.042-.229-.021-.271.042-.042.083.021.187.146.25.104.062.229.042.271-.042zm.646.709c.083-.062.062-.208-.042-.333-.104-.104-.25-.146-.333-.062-.083.062-.062.208.042.333.104.104.25.146.333.062zm.625.937c.104-.083.104-.25 0-.396-.083-.146-.25-.208-.354-.125-.104.062-.104.229 0 .375s.271.208.354.146zm.875.875c.083-.083.042-.271-.083-.396-.146-.146-.333-.167-.417-.062-.104.083-.062.271.083.396.146.146.333.167.417.062zm1.187.521c.042-.125-.083-.271-.271-.333-.167-.042-.354.021-.396.146s.083.271.271.312c.167.062.354 0 .396-.125zm1.313.104c0-.146-.167-.25-.354-.229-.187 0-.333.104-.333.229 0 .146.146.25.354.229.187 0 .333-.104.333-.229zm1.208-.208c-.021-.125-.187-.208-.375-.187-.187.042-.312.167-.292.312.021.125.187.208.375.167s.312-.167.292-.292z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_gitlab" xmlns="http://www.w3.org/2000/svg"><path d="M1.629 11.034 14 26.888.442 17.048a1.09 1.09 0 0 1-.39-1.203l1.578-4.811zm7.217 0h10.309l-5.154 15.854zM5.753 1.475l3.093 9.559H1.63l3.093-9.559a.548.548 0 0 1 1.031 0zm20.618 9.559 1.578 4.811c.141.437-.016.922-.39 1.203l-13.558 9.84 12.371-15.854zm0 0h-7.216l3.093-9.559a.548.548 0 0 1 1.031 0z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_heart" xmlns="http://www.w3.org/2000/svg"><path d="M16 29.714a1.11 1.11 0 0 1-.786-.321L4.072 18.643c-.143-.125-4.071-3.714-4.071-8 0-5.232 3.196-8.357 8.535-8.357 3.125 0 6.053 2.464 7.464 3.857 1.411-1.393 4.339-3.857 7.464-3.857 5.339 0 8.535 3.125 8.535 8.357 0 4.286-3.928 7.875-4.089 8.035L16.785 29.392c-.214.214-.5.321-.786.321z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_home" xmlns="http://www.w3.org/2000/svg"><path d="M24.003 15.695v8.336c0 .608-.504 1.111-1.111 1.111h-6.669v-6.669h-4.446v6.669H5.108a1.119 1.119 0 0 1-1.111-1.111v-8.336c0-.035.017-.069.017-.104L14 7.359l9.986 8.232a.224.224 0 0 1 .017.104zm3.873-1.198-1.077 1.285a.578.578 0 0 1-.365.191h-.052a.547.547 0 0 1-.365-.122L14 5.831 1.983 15.851a.594.594 0 0 1-.417.122.578.578 0 0 1-.365-.191L.124 14.497a.57.57 0 0 1 .069-.781L12.679 3.314c.729-.608 1.91-.608 2.64 0l4.237 3.543V3.471c0-.313.243-.556.556-.556h3.334c.313 0 .556.243.556.556v7.085l3.803 3.161c.226.191.26.556.069.781z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_info_outline" xmlns="http://www.w3.org/2000/svg"><path d="M12.62 9.793V6.967h2.761v2.826H12.62zM14 25.239q4.601 0 7.92-3.319T25.239 14 21.92 6.08 14 2.761 6.08 6.08 2.761 14t3.319 7.92T14 25.239zM14 0q5.784 0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0zm-1.38 21.033V12.62h2.761v8.413H12.62z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_keyboard_arrow_down" xmlns="http://www.w3.org/2000/svg"><path d="M3.281 5.36 14 16.079 24.719 5.36 28 8.641l-14 14-14-14z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_keyboard_arrow_left" xmlns="http://www.w3.org/2000/svg"><path d="M25.875 28.25 22.125 32 6.126 16.001 22.125.002l3.75 3.75-12.25 12.25z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_keyboard_arrow_right" xmlns="http://www.w3.org/2000/svg"><path d="M6.125 28.25 18.375 16 6.125 3.75 9.875 0l15.999 15.999L9.875 31.998z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_keyboard_arrow_up" xmlns="http://www.w3.org/2000/svg"><path d="M24.719 22.64 14 11.921 3.281 22.64 0 19.359l14-14 14 14z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_language" xmlns="http://www.w3.org/2000/svg"><path d="M20.112 16.826h4.732q.394-1.84.394-2.826t-.394-2.826h-4.732q.197 1.38.197 2.826t-.197 2.826zm-2.497 7.756q1.643-.526 3.418-2.005t2.695-2.991h-4.141q-.657 2.629-1.972 4.995zm-.329-7.756q.197-1.38.197-2.826t-.197-2.826h-6.573q-.197 1.38-.197 2.826t.197 2.826h6.573zM14 25.173q1.84-2.695 2.695-5.587h-5.39q.854 2.892 2.695 5.587zM8.413 8.413q.789-2.826 1.972-4.995-1.643.526-3.451 2.005T4.272 8.414h4.141zM4.272 19.587q.854 1.512 2.662 2.991t3.451 2.005q-1.315-2.366-1.972-4.995H4.272zm-1.117-2.761h4.732Q7.69 15.446 7.69 14t.197-2.826H3.155q-.394 1.84-.394 2.826t.394 2.826zM14 2.826q-1.84 2.695-2.695 5.587h5.39Q15.841 5.521 14 2.826zm9.727 5.587q-.92-1.512-2.695-2.991t-3.418-2.005q1.183 2.169 1.972 4.995h4.141zM14 0q5.784 0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_link" xmlns="http://www.w3.org/2000/svg"><path d="M24.037 7.963q3.305 0 5.634 2.366T32 16t-2.329 5.671-5.634 2.366h-6.46v-3.08h6.46q2.028 0 3.493-1.465t1.465-3.493-1.465-3.493-3.493-1.465h-6.46v-3.08h6.46zM9.615 17.578v-3.155h12.77v3.155H9.615zM3.005 16q0 2.028 1.465 3.493t3.493 1.465h6.46v3.08h-6.46q-3.305 0-5.634-2.366T0 16.001t2.329-5.671 5.634-2.366h6.46v3.08h-6.46q-2.028 0-3.493 1.465t-1.465 3.493z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_mastodon" xmlns="http://www.w3.org/2000/svg"><path d="M30.924 10.506c0-6.941-4.548-8.976-4.548-8.976C24.083.477 20.144.034 16.054.001h-.101C11.862.034 7.926.477 5.633 1.53c0 0-4.548 2.035-4.548 8.976 0 1.589-.031 3.491.02 5.505.165 6.79 1.245 13.479 7.522 15.14 2.893.765 5.379.927 7.38.816 3.629-.2 5.667-1.296 5.667-1.296l-.12-2.633s-2.593.817-5.505.719c-2.887-.099-5.932-.311-6.399-3.855a7.069 7.069 0 0 1-.064-.967v-.028.001s2.833.693 6.423.857c2.195.1 4.253-.129 6.344-.377 4.009-.479 7.5-2.949 7.939-5.207.689-3.553.633-8.676.633-8.676zm-5.366 8.945h-3.329v-8.159c0-1.72-.724-2.592-2.171-2.592-1.6 0-2.403 1.035-2.403 3.083v4.465h-3.311v-4.467c0-2.048-.803-3.083-2.403-3.083-1.447 0-2.171.873-2.171 2.592v8.159H6.441v-8.404c0-1.719.437-3.084 1.316-4.093.907-1.011 2.092-1.528 3.565-1.528 1.704 0 2.995.655 3.848 1.965l.828 1.391.829-1.391c.853-1.311 2.144-1.965 3.848-1.965 1.472 0 2.659.517 3.565 1.528.877 1.009 1.315 2.375 1.315 4.093z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_matrix" xmlns="http://www.w3.org/2000/svg"><path d="M.843.734v30.532H3.04v.733H0V0h3.04v.733zm9.391 9.68v1.543h.044a4.417 4.417 0 0 1 1.489-1.365c.577-.327 1.248-.487 2-.487.72 0 1.377.143 1.975.419.597.277 1.047.776 1.36 1.477.339-.499.8-.941 1.379-1.323.579-.383 1.267-.573 2.061-.573.604 0 1.163.075 1.68.223a3.34 3.34 0 0 1 1.324.707c.368.327.652.745.861 1.268.203.523.307 1.151.307 1.889v7.637h-3.132v-6.468c0-.381-.013-.745-.043-1.083a2.315 2.315 0 0 0-.246-.893l.006.013a1.484 1.484 0 0 0-.577-.593l-.007-.004c-.259-.147-.609-.221-1.047-.221-.443 0-.8.085-1.071.252-.267.166-.483.39-.635.656l-.005.009a2.558 2.558 0 0 0-.307.915l-.002.013a7.156 7.156 0 0 0-.08 1.044v6.359h-3.133v-6.4c0-.339-.005-.671-.024-1.003a2.772 2.772 0 0 0-.197-.936l.007.019a1.41 1.41 0 0 0-.548-.667l-.006-.003c-.259-.167-.635-.253-1.139-.253-.148 0-.345.032-.585.099-.24.068-.48.191-.707.376-.228.184-.425.449-.585.793-.16.345-.24.8-.24 1.36v6.621H7.279v-11.42zm20.923 20.852V.734H28.96V.001H32V32h-3.04v-.733z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_menu" xmlns="http://www.w3.org/2000/svg"><path d="M.001 5.334h31.998v3.583H.001V5.334zm0 12.416v-3.5h31.998v3.5H.001zm0 8.916v-3.583h31.998v3.583H.001z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_notification" xmlns="http://www.w3.org/2000/svg"><path d="m22.615 19.384 2.894 2.894v1.413H2.49v-1.413l2.894-2.894V12.25q0-3.365 1.716-5.856t4.745-3.231v-1.01q0-.875.606-1.514T13.999 0t1.548.639.606 1.514v1.01q3.029.74 4.745 3.231t1.716 5.856v7.134zM14 27.999q-1.211 0-2.053-.808t-.841-2.019h5.788q0 1.144-.875 1.986T14 27.999z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_path" xmlns="http://www.w3.org/2000/svg"><path d="M28 12.62h-9.793V8.414h-2.826v11.173h2.826v-4.206H28V26.62h-9.793v-4.206H12.62v-14H9.794v4.206H.001V1.381h9.793v4.206h8.413V1.381H28V12.62z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_person" xmlns="http://www.w3.org/2000/svg"><path d="M16 20.023q5.052 0 10.526 2.199t5.473 5.754v4.023H0v-4.023q0-3.555 5.473-5.754t10.526-2.199zM16 16q-3.275 0-5.614-2.339T8.047 8.047t2.339-5.661T16 0t5.614 2.386 2.339 5.661-2.339 5.614T16 16z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_search" xmlns="http://www.w3.org/2000/svg"><path d="M11.925 20.161q3.432 0 5.834-2.402t2.402-5.834-2.402-5.834-5.834-2.402-5.834 2.402-2.402 5.834 2.402 5.834 5.834 2.402zm10.981 0L32 29.255 29.255 32l-9.094-9.094v-1.458l-.515-.515q-3.26 2.831-7.721 2.831-4.976 0-8.45-3.432T.001 11.925t3.474-8.45 8.45-3.474 8.407 3.474 3.432 8.45q0 1.802-.858 4.075t-1.973 3.646l.515.515h1.458z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_shield" xmlns="http://www.w3.org/2000/svg"><path d="M22.167 15.166V3.5h-8.166v20.726c.93-.492 2.424-1.349 3.883-2.497 1.95-1.531 4.284-3.919 4.284-6.562zm3.499-13.999v14c0 7.674-10.737 12.523-11.192 12.724-.146.073-.31.109-.474.109s-.328-.036-.474-.109c-.456-.201-11.192-5.049-11.192-12.724v-14C2.334.529 2.863 0 3.501 0H24.5c.638 0 1.167.529 1.167 1.167z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_star" xmlns="http://www.w3.org/2000/svg"><path d="M14 22.052 5.324 27.31l2.3-9.859L0 10.813l10.056-.854L14 .692l3.944 9.267L28 10.813l-7.624 6.638 2.3 9.859z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_tag" xmlns="http://www.w3.org/2000/svg"><path d="M17.52 17.52v-7.041h-7.041v7.041h7.041zM28 10.479h-7.041v7.041H28v3.439h-7.041V28H17.52v-7.041h-7.041V28H7.04v-7.041H-.001V17.52H7.04v-7.041H-.001V7.04H7.04V-.001h3.439V7.04h7.041V-.001h3.439V7.04H28v3.439z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_timer" xmlns="http://www.w3.org/2000/svg"><path d="M16 29q4.428 0 7.536-3.143t3.107-7.571-3.107-7.536T16 7.643 8.464 10.75t-3.107 7.536 3.107 7.571T16 29zM26.714 9.786q1.214 1.571 2.107 4.036t.893 4.464q0 5.643-4 9.678T16 32t-9.714-4.036-4-9.678 4-9.678T16 4.572q1.929 0 4.464.929t4.107 2.143l2.143-2.214q1.143.929 2.143 2.143zM14.5 19.857v-9.143h3v9.143h-3zM20.571.001v3.071h-9.143V.001h9.143z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_xmpp" xmlns="http://www.w3.org/2000/svg"><path d="M31.995 4.237c-.449.175-1.12.433-1.936.745-1.544.591-2.328.891-2.924 1.093-.613.208-1.287.409-2.635.813-.911.272-1.672.495-2.212.651-.031.875 0 2.177-.292 3.635a21.837 21.837 0 0 1-2.016 5.765c-1.496 2.944-3.236 4.817-3.88 5.476-.056-.059-.112-.117-.168-.179-.707-.763-2.403-2.703-3.815-5.683-1.053-2.223-1.484-4.044-1.605-4.584-.356-1.589-.427-2.955-.427-4.117 0-.075-.036-.129-.101-.149-.721-.223-1.765-.519-2.887-.853-1.271-.379-2.193-.744-3.408-1.2-.493-.185-1.409-.547-2.217-.859C.723 4.499.113 4.236.041 4.236c-.005 0-.015 0-.023.012a.131.131 0 0 0-.019.076c.009.593.08 1.361.256 2.365.615 3.503 2.688 7.061 4.36 9.244 0 0 3.717 5.035 9.128 8.144l.303.176c-.009.008-.02.015-.028.021-1.717 1.316-3.201 1.977-3.579 2.14a15.71 15.71 0 0 1-2.219.772v.407a25.31 25.31 0 0 0 2.72-.487 26.72 26.72 0 0 0 5.075-1.792c.136.067.276.136.42.204 1.527.725 3.571 1.627 6.073 2.048.613.103 1.136.165 1.507.195a.109.109 0 0 0 .115-.091.55.55 0 0 0 .004-.217.107.107 0 0 0-.063-.073c-.505-.209-1.201-.4-1.983-.719-.935-.381-2.241-1.067-3.648-2.128a13.528 13.528 0 0 1-.367-.287c4.64-2.656 7.989-6.588 7.989-6.588 1.735-2.036 4.441-5.623 5.431-9.795.349-1.473.539-2.741.5-3.628z"/></svg></defs></svg>




    <div
      class="wrapper "
    >
      
      <header class="gdoc-header">
  <div class="container flex align-center justify-between">
    
      <label for="menu-control" class="gdoc-nav__control">
        <div tabindex="0" role="button" aria-pressed="false">
          <input type="checkbox" class="hidden" id="menu-control" />

          <svg class="gdoc-icon gdoc_menu">
            <title>Open Navigation</title>
            <use xlink:href="#gdoc_menu"></use>
          </svg>
          <svg class="gdoc-icon gdoc_arrow_back">
            <title>Close Navigation</title>
            <use xlink:href="#gdoc_arrow_back"></use>
          </svg>
        </div>
      </label>
    
    <div>
      <a class="gdoc-brand gdoc-header__link" href="http://localhost:1313/">
        <span class="flex align-center">
          <img
            class="gdoc-brand__img"
            src="/brand.svg"
            alt=""
          />
          <span class="gdoc-brand__title">raphi&#39;s corner</span>
        </span>
      </a>
    </div>
    <div class="gdoc-menu-header flex gap-16">
      <span class="gdoc-menu-header__items">
        


        <span id="gdoc-color-theme" tabindex="0" role="button" aria-pressed="false">
          <svg class="gdoc-icon gdoc_brightness_dark">
            <title>Toggle Dark/Light/Auto mode</title>
            <use xlink:href="#gdoc_brightness_dark"></use>
          </svg>
          <svg class="gdoc-icon gdoc_brightness_light">
            <title>Toggle Dark/Light/Auto mode</title>
            <use xlink:href="#gdoc_brightness_light"></use>
          </svg>
          <svg class="gdoc-icon gdoc_brightness_auto">
            <title>Toggle Dark/Light/Auto mode</title>
            <use xlink:href="#gdoc_brightness_auto"></use>
          </svg>
        </span>

        <span class="gdoc-menu-header__home">
          <a href="http://localhost:1313/" class="gdoc-header__link">
            <svg class="gdoc-icon gdoc_home">
              <title>Back to homepage</title>
              <use xlink:href="#gdoc_home"></use>
            </svg>
          </a>
        </span>

        

      </span>
      <span class="gdoc-menu-header__control">
        <label for="menu-header-control">
          <div tabindex="0" role="button" aria-pressed="false">
            <input type="checkbox" class="hidden" id="menu-header-control" />

            <svg class="gdoc-icon gdoc_keyboard_arrow_right">
              <use xlink:href="#gdoc_keyboard_arrow_right"></use>
              <title>Close Menu Bar</title>
            </svg>

            <svg class="gdoc-icon gdoc_keyboard_arrow_left">
              <use xlink:href="#gdoc_keyboard_arrow_left"></use>
              <title>Open Menu Bar</title>
            </svg>
          </div>
        </label>
      </span>
    </div>
  </div>
</header>



      <main class="container flex flex-even">
        
          <aside class="gdoc-nav">
            <nav>
  
  <div class="gdoc-search flex align-center">
    <svg class="gdoc-icon gdoc_search"><use xlink:href="#gdoc_search"></use></svg>
    <input
      type="text"
      id="gdoc-search-input"
      class="gdoc-search__input"
      placeholder="Search..."
      aria-label="Search"
      maxlength="64"
      data-site-base-url="http://localhost:1313/"
      data-site-lang="en"
    />
    <ul id="gdoc-search-results" class="gdoc-search__list"></ul>
  </div>




  <section class="gdoc-nav--main">
    <h2>Navigation</h2>
    
      

  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">Oracle</span>
              
              
            </label>

            
              
  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/oracle/ASH-HowTo/"
                    class="gdoc-nav__entry is-active"
                  >
                    Ash How To
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
  </ul>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">Postgres</span>
              
              
            </label>

            
              
  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/postgres/pgbench/"
                    class="gdoc-nav__entry"
                  >
                    pgbench
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/postgres/pgstat_snap/"
                    class="gdoc-nav__entry"
                  >
                    pgstat_snap extension
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
  </ul>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">Stuff</span>
              
              
            </label>

            
              
  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="/stuff/stuff/"
                    class="gdoc-nav__entry"
                  >
                    other stuff
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
  </ul>

            
          </li>
        
      
    
  </ul>






    
  </section>

  


  <section class="gdoc-nav--more">
    
  </section>
</nav>

          </aside>
        


        <div class="gdoc-page">
          
  


  






<div
  class="gdoc-page__header flex flex-wrap
  
    justify-between
  
  hidden-mobile
  "
  itemprop="breadcrumb"
>
  
    <div>
      <svg class="gdoc-icon gdoc_path hidden-mobile"><use xlink:href="#gdoc_path"></use></svg>
      <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
        
        
        
        
  
  
    
    
    
    
  
  
    
    
    
    
  
  
    <li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><a itemscope itemtype='https://schema.org/WebPage' itemprop='item' itemid='/' href='/'><span itemprop='name'>Welcome</span></a><meta itemprop='position' content='1' /></li><li> / </li><li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><a itemscope itemtype='https://schema.org/WebPage' itemprop='item' itemid='/oracle/' href='/oracle/'><span itemprop='name'>Oracle</span></a><meta itemprop='position' content='2' /></li><li> / </li><li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><span itemprop='name'>Ash How To</span><meta itemprop='position' content='3' /></li>
  

  

  

      </ol>
    </div>
  
  
</div>



  <article
    class="gdoc-markdown gdoc-markdown__align--left"
    id="main-content" tabindex="-1"
  >
    <h1>Ash How To</h1>
    
    <img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" class="logo" width="120"/>
<div class="flex align-center gdoc-page__anchorwrap">
    <h1 id="ash-howto"
    >
        ASH HowTo
    </h1>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#ash-howto" class="gdoc-page__anchor clip flex align-center" title="Anchor to: ASH HowTo" aria-label="Anchor to: ASH HowTo" href="#ash-howto">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>DT Database Services
Exported on 07/07/2025</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="table-of-contents"
    >
        Table of Contents
    </h2>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#table-of-contents" class="gdoc-page__anchor clip flex align-center" title="Anchor to: Table of Contents" aria-label="Anchor to: Table of Contents" href="#table-of-contents">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<ol>
<li><a
  class="gdoc-markdown__link"
  href="#introduction"
>Introduction</a>
<ul>
<li><a
  class="gdoc-markdown__link"
  href="#useful-tables-and-views"
>Useful Tables and Views</a></li>
</ul>
</li>
<li><a
  class="gdoc-markdown__link"
  href="#ash-basics"
>ASH Basics</a>
<ul>
<li><a
  class="gdoc-markdown__link"
  href="#description-of-fields"
>Description of Fields</a>
<ul>
<li><a
  class="gdoc-markdown__link"
  href="#as-of-19c"
>As of 19c</a></li>
<li><a
  class="gdoc-markdown__link"
  href="#useful-fields"
>Useful Fields</a></li>
</ul>
</li>
<li><a
  class="gdoc-markdown__link"
  href="#checking-ash-time-range"
>Checking ASH Time Range</a></li>
<li><a
  class="gdoc-markdown__link"
  href="#saving-ash"
>Saving ASH</a></li>
</ul>
</li>
<li><a
  class="gdoc-markdown__link"
  href="#ash-scripts"
>ASH Scripts</a>
<ul>
<li><a
  class="gdoc-markdown__link"
  href="#basic-script"
>Basic Script</a>
<ul>
<li><a
  class="gdoc-markdown__link"
  href="#from-ash"
>From ASH</a></li>
<li><a
  class="gdoc-markdown__link"
  href="#from-dash"
>From DASH</a></li>
</ul>
</li>
<li><a
  class="gdoc-markdown__link"
  href="#mapping-to-user-and-object-name"
>Mapping to User and Object Name</a></li>
<li><a
  class="gdoc-markdown__link"
  href="#limiting-time-range"
>Limiting Time Range</a></li>
<li><a
  class="gdoc-markdown__link"
  href="#limiting-number-of-rows"
>Limiting Number of Rows</a></li>
<li><a
  class="gdoc-markdown__link"
  href="#drilldown"
>Drilldown</a>
<ul>
<li><a
  class="gdoc-markdown__link"
  href="#blocking-session"
>Blocking Session</a></li>
<li><a
  class="gdoc-markdown__link"
  href="#specific-query"
>Specific Query</a></li>
<li><a
  class="gdoc-markdown__link"
  href="#queries-of-a-plsql-procedure"
>Queries of a PL/SQL Procedure</a></li>
<li><a
  class="gdoc-markdown__link"
  href="#specific-events"
>Specific Events</a></li>
<li><a
  class="gdoc-markdown__link"
  href="#event-parameters"
>Event Parameters</a></li>
<li><a
  class="gdoc-markdown__link"
  href="#other-useful-filters"
>Other Useful Filters</a></li>
</ul>
</li>
<li><a
  class="gdoc-markdown__link"
  href="#more-ash-queries"
>More ASH Queries</a>
<ul>
<li><a
  class="gdoc-markdown__link"
  href="#pga-usage"
>PGA Usage</a></li>
<li><a
  class="gdoc-markdown__link"
  href="#temp-usage"
>TEMP Usage</a></li>
</ul>
</li>
</ul>
</li>
</ol>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="1-introduction"
    >
        1. Introduction
    </h2>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#1-introduction" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 1. Introduction" aria-label="Anchor to: 1. Introduction" href="#1-introduction">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The view <strong>(g)v$active_session_history</strong> (ASH) records the wait events of all active sessions in memory every second. Since the memory for ASH is limited, the data is only available for a few hours. Therefore, 10% of the ASH data is written to the view <strong>dba_hist_active_sess_history</strong> (DASH) and is permanently available. The live view of Enterprise Manager is based on ASH data, AWR reports are based on <strong>DBA_HIST_</strong>* views.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="11-useful-tables-and-views"
    >
        1.1 Useful Tables and Views
    </h3>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#11-useful-tables-and-views" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 1.1 Useful Tables and Views" aria-label="Anchor to: 1.1 Useful Tables and Views" href="#11-useful-tables-and-views">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<div class="table-wrap"> <table>
  <thead>
      <tr>
          <th style="text-align: left">Name</th>
          <th style="text-align: left">Data Description</th>
          <th style="text-align: left">Notes</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">v$active_session_history</td>
          <td style="text-align: left">Wait events for all sessions of a node in 1-second snapshots</td>
          <td style="text-align: left">In memory, limited space</td>
      </tr>
      <tr>
          <td style="text-align: left">gv$active_session_history</td>
          <td style="text-align: left">Same as above, but for all nodes in a RAC cluster</td>
          <td style="text-align: left">Has additional column &ldquo;INST_ID&rdquo;</td>
      </tr>
      <tr>
          <td style="text-align: left">dba_hist_active_sess_history</td>
          <td style="text-align: left">Historical 10-second snapshots of ASH</td>
          <td style="text-align: left">Stored on disk; &ldquo;INSTANCE_NUMBER&rdquo; instead of &ldquo;INST_ID&rdquo;</td>
      </tr>
      <tr>
          <td style="text-align: left">v$ash_info</td>
          <td style="text-align: left">Statistics about ASH itself</td>
          <td style="text-align: left">&ldquo;OLDEST_SAMPLE_TIME&rdquo; shows how far back data goes</td>
      </tr>
      <tr>
          <td style="text-align: left">v$sql</td>
          <td style="text-align: left">Stats for currently loaded SQL statements</td>
          <td style="text-align: left">One row per child cursor</td>
      </tr>
      <tr>
          <td style="text-align: left">dba_hist_sqltext</td>
          <td style="text-align: left">Historical SQL text for SQL_IDs no longer in shared area</td>
          <td style="text-align: left">Use <code>set long 10000</code> to see full text</td>
      </tr>
      <tr>
          <td style="text-align: left">dba_objects</td>
          <td style="text-align: left">Info on all objects in the DB</td>
          <td style="text-align: left">Useful for mapping to current_obj# in ASH</td>
      </tr>
      <tr>
          <td style="text-align: left">dba_data_files</td>
          <td style="text-align: left">Info on all data files</td>
          <td style="text-align: left">Useful for mapping to current_file# in ASH</td>
      </tr>
  </tbody>
</table> </div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="2-ash-basics"
    >
        2. ASH Basics
    </h2>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#2-ash-basics" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 2. ASH Basics" aria-label="Anchor to: 2. ASH Basics" href="#2-ash-basics">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>In principle, it does not matter whether you query ASH/DASH in the CDB or a specific PDB, the data is stored at the CDB level. However, when mapping or joining USER_ID, CURRENT_OBJ#, CURRENT_FILE#, etc., this must be done in the relevant PDB.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="21-description-of-fields"
    >
        2.1 Description of Fields
    </h3>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#21-description-of-fields" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 2.1 Description of Fields" aria-label="Anchor to: 2.1 Description of Fields" href="#21-description-of-fields">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h4 id="211-as-of-19c"
    >
        2.1.1 As of 19c
    </h4>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#211-as-of-19c" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 2.1.1 As of 19c" aria-label="Anchor to: 2.1.1 As of 19c" href="#211-as-of-19c">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>ASH and DASH have over 100 fields, and more are added with each release. The description of all fields for the memory and history variant is available here:
<a
  class="gdoc-markdown__link"
  href="https://docs.oracle.com/en/database/oracle/oracle-database/19/refrn/DBA_HIST_ACTIVE_SESS_HISTORY.html"
>https://docs.oracle.com/en/database/oracle/oracle-database/19/refrn/DBA_HIST_ACTIVE_SESS_HISTORY.html</a></p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h4 id="212-useful-fields"
    >
        2.1.2 Useful Fields
    </h4>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#212-useful-fields" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 2.1.2 Useful Fields" aria-label="Anchor to: 2.1.2 Useful Fields" href="#212-useful-fields">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>All fields of ASH/DASH can be useful in specific cases, but the following are often used repeatedly:</p>
<div class="table-wrap"> <table>
  <thead>
      <tr>
          <th style="text-align: left">Column</th>
          <th style="text-align: left">Datatype</th>
          <th style="text-align: left">Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">INST_ID</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">Only in gv$active_session_history, RAC instance where the session is running</td>
      </tr>
      <tr>
          <td style="text-align: left">INSTANCE_NUMBER</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">Only in dba_hist_active_sess_history, RAC instance where the session is running</td>
      </tr>
      <tr>
          <td style="text-align: left">SAMPLE_ID</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">ID of the sample</td>
      </tr>
      <tr>
          <td style="text-align: left">SAMPLE_TIME</td>
          <td style="text-align: left">TIMESTAMP(3)</td>
          <td style="text-align: left">Time at which the sample was taken</td>
      </tr>
      <tr>
          <td style="text-align: left">SESSION_ID</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">Session identifier; maps to V$SESSION.SID</td>
      </tr>
      <tr>
          <td style="text-align: left">SESSION_SERIAL#</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">Session serial number (uniquely identifies a session&rsquo;s objects); maps to V$SESSION.SERIAL#</td>
      </tr>
      <tr>
          <td style="text-align: left">SESSION_TYPE</td>
          <td style="text-align: left">VARCHAR2(10)</td>
          <td style="text-align: left">Session type: FOREGROUND/BACKGROUND</td>
      </tr>
      <tr>
          <td style="text-align: left">USER_ID</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">Oracle user identifier; maps to V$SESSION.USER#</td>
      </tr>
      <tr>
          <td style="text-align: left">SQL_ID</td>
          <td style="text-align: left">VARCHAR2(13)</td>
          <td style="text-align: left">SQL identifier of the SQL statement executed at the time of sampling</td>
      </tr>
      <tr>
          <td style="text-align: left">SQL_OPNAME</td>
          <td style="text-align: left">VARCHAR2(64)</td>
          <td style="text-align: left">SQL command name (INSERT, DELETE, UPDATE, etc.)</td>
      </tr>
      <tr>
          <td style="text-align: left">TOP_LEVEL_SQL_ID</td>
          <td style="text-align: left">VARCHAR2(13)</td>
          <td style="text-align: left">SQL identifier of the top-level SQL statement (for PL/SQL)</td>
      </tr>
      <tr>
          <td style="text-align: left">SQL_PLAN_HASH_VALUE</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">Numeric representation of the SQL plan for the cursor</td>
      </tr>
      <tr>
          <td style="text-align: left">EVENT</td>
          <td style="text-align: left">VARCHAR2(64)</td>
          <td style="text-align: left">If SESSION_STATE = WAITING, the event waited for; if ON CPU, this column is NULL</td>
      </tr>
      <tr>
          <td style="text-align: left">P1TEXT</td>
          <td style="text-align: left">VARCHAR2(64)</td>
          <td style="text-align: left">Text of the first additional parameter</td>
      </tr>
      <tr>
          <td style="text-align: left">P1</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">First additional parameter</td>
      </tr>
      <tr>
          <td style="text-align: left">P2TEXT</td>
          <td style="text-align: left">VARCHAR2(64)</td>
          <td style="text-align: left">Text of the second additional parameter</td>
      </tr>
      <tr>
          <td style="text-align: left">P2</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">Second additional parameter</td>
      </tr>
      <tr>
          <td style="text-align: left">P3TEXT</td>
          <td style="text-align: left">VARCHAR2(64)</td>
          <td style="text-align: left">Text of the third additional parameter</td>
      </tr>
      <tr>
          <td style="text-align: left">P3</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">Third additional parameter</td>
      </tr>
      <tr>
          <td style="text-align: left">WAIT_CLASS</td>
          <td style="text-align: left">VARCHAR2(64)</td>
          <td style="text-align: left">Wait class name of the event</td>
      </tr>
      <tr>
          <td style="text-align: left">SESSION_STATE</td>
          <td style="text-align: left">VARCHAR2(7)</td>
          <td style="text-align: left">Session state: WAITING / ON CPU</td>
      </tr>
      <tr>
          <td style="text-align: left">TIME_WAITED</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">If WAITING, time spent waiting for that event (in microseconds)</td>
      </tr>
      <tr>
          <td style="text-align: left">BLOCKING_SESSION</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">Session ID of the blocking session</td>
      </tr>
      <tr>
          <td style="text-align: left">BLOCKING_INST_ID</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">Instance number of the blocker</td>
      </tr>
      <tr>
          <td style="text-align: left">CURRENT_OBJ#</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">Object ID referenced</td>
      </tr>
      <tr>
          <td style="text-align: left">CURRENT_FILE#</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">File number referenced</td>
      </tr>
      <tr>
          <td style="text-align: left">CURRENT_BLOCK#</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">Block ID referenced</td>
      </tr>
      <tr>
          <td style="text-align: left">REMOTE_INSTANCE#</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">Remote instance serving the block</td>
      </tr>
      <tr>
          <td style="text-align: left">PGA_ALLOCATED</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">PGA memory used (in bytes)</td>
      </tr>
      <tr>
          <td style="text-align: left">TEMP_SPACE_ALLOCATED</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">TEMP memory used (in bytes)</td>
      </tr>
      <tr>
          <td style="text-align: left">CON_DBID</td>
          <td style="text-align: left">NUMBER</td>
          <td style="text-align: left">Database ID of the pluggable database (PDB)</td>
      </tr>
      <tr>
          <td style="text-align: left">PROGRAM</td>
          <td style="text-align: left">VARCHAR2(48)</td>
          <td style="text-align: left">Name of the operating system program</td>
      </tr>
      <tr>
          <td style="text-align: left">MACHINE</td>
          <td style="text-align: left">VARCHAR2(64)</td>
          <td style="text-align: left">Client&rsquo;s operating system machine name</td>
      </tr>
  </tbody>
</table> </div>
<p><strong>Good to Know:</strong></p>
<ul>
<li>Wait events that only affect the CDB, such as backup activities, are not shown when querying ASH in the PDB.</li>
<li>A session in the PDB can have a blocking session from the CDB, e.g., the logwriter session. The wait events of the blocking session itself must then be analyzed via the CDB.</li>
</ul>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="22-checking-ash-time-range"
    >
        2.2 Checking ASH Time Range
    </h3>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#22-checking-ash-time-range" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 2.2 Checking ASH Time Range" aria-label="Anchor to: 2.2 Checking ASH Time Range" href="#22-checking-ash-time-range">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>Before analyzing a problem in ASH, you should ensure that the data for the relevant period is still available:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">oldest_sample_time</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">v$ash_info</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p><strong>OLDEST_SAMPLE_TIME</strong>
03-SEP-21 03.34.03.575000000 AM</p>
<p>Query information before OLDEST_SAMPLE_TIME can only be viewed via DASH.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="23-saving-ash"
    >
        2.3 Saving ASH
    </h3>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#23-saving-ash" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 2.3 Saving ASH" aria-label="Anchor to: 2.3 Saving ASH" href="#23-saving-ash">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>For acute problems, it is advisable to save the entire ASH to a table for later, more detailed analysis. The table name is arbitrary:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">ash_snapshot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">gv$active_session_history</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>In scripts, you should then select from this table:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- from gv$active_session_history
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">from</span><span class="w"> </span><span class="n">ash_snapshot</span><span class="w">
</span></span></span></code></pre></div><p><strong>Good to Know:</strong>
Queries that are no longer in ASH and ran less than 10 seconds may not appear in DASH either. In such cases, the waits of a query can no longer be meaningfully analyzed.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="3-ash-scripts"
    >
        3. ASH Scripts
    </h2>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#3-ash-scripts" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 3. ASH Scripts" aria-label="Anchor to: 3. ASH Scripts" href="#3-ash-scripts">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>Below is an example of how to design individual queries based on a template to get to the bottom of specific problems.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="31-basic-script"
    >
        3.1 Basic Script
    </h3>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#31-basic-script" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 3.1 Basic Script" aria-label="Anchor to: 3.1 Basic Script" href="#31-basic-script">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>This basic query shows the most important columns of all wait events in the last hour for all nodes of a (full) RAC database and works in both CDB and PDB.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h4 id="311-from-ash"
    >
        3.1.1 From ASH
    </h4>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#311-from-ash" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 3.1.1 From ASH" aria-label="Anchor to: 3.1.1 From ASH" href="#311-from-ash">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>See also performance scripts: ashtop</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">set</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="mi">400</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">set</span><span class="w"> </span><span class="n">pages</span><span class="w"> </span><span class="mi">100</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">column</span><span class="w"> </span><span class="n">sample_time</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">a22</span><span class="w"> </span><span class="n">tru</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">column</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">a30</span><span class="w"> </span><span class="n">tru</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">sample_time</span><span class="p">,</span><span class="w"> </span><span class="n">inst_id</span><span class="p">,</span><span class="w"> </span><span class="n">sql_id</span><span class="p">,</span><span class="w"> </span><span class="n">session_id</span><span class="p">,</span><span class="w"> </span><span class="n">user_id</span><span class="p">,</span><span class="w"> </span><span class="n">event</span><span class="p">,</span><span class="w"> </span><span class="n">time_waited</span><span class="p">,</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">current_obj</span><span class="o">#</span><span class="p">,</span><span class="w"> </span><span class="n">blocking_session</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">gv$active_session_history</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">sample_time</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">sysdate</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">sysdate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><div class="flex align-center gdoc-page__anchorwrap">
    <h4 id="312-from-dash"
    >
        3.1.2 From DASH
    </h4>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#312-from-dash" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 3.1.2 From DASH" aria-label="Anchor to: 3.1.2 From DASH" href="#312-from-dash">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>See also performance scripts: ashtop
Difference from the ASH version: instance_number instead of inst_id and different view</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">set</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="mi">400</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">set</span><span class="w"> </span><span class="n">pages</span><span class="w"> </span><span class="mi">100</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">column</span><span class="w"> </span><span class="n">sample_time</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">a22</span><span class="w"> </span><span class="n">tru</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">column</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">a30</span><span class="w"> </span><span class="n">tru</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">sample_time</span><span class="p">,</span><span class="w"> </span><span class="n">instance_number</span><span class="p">,</span><span class="w"> </span><span class="n">sql_id</span><span class="p">,</span><span class="w"> </span><span class="n">session_id</span><span class="p">,</span><span class="w"> </span><span class="n">user_id</span><span class="p">,</span><span class="w"> </span><span class="n">event</span><span class="p">,</span><span class="w"> </span><span class="n">time_waited</span><span class="p">,</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">current_obj</span><span class="o">#</span><span class="p">,</span><span class="w"> </span><span class="n">blocking_session</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">dba_hist_active_sess_history</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">sample_time</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">sysdate</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">sysdate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p><strong>Sample Output:</strong></p>
<div class="table-wrap"> <table>
  <thead>
      <tr>
          <th style="text-align: left">SAMPLE_TIME</th>
          <th style="text-align: left">INST_ID</th>
          <th style="text-align: left">SQL_ID</th>
          <th style="text-align: left">SESSION_ID</th>
          <th style="text-align: left">USER_ID</th>
          <th style="text-align: left">EVENT</th>
          <th style="text-align: left">TIME_WAITED</th>
          <th style="text-align: left">CURRENT_OBJ#</th>
          <th style="text-align: left">BLOCKING_SESSION</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">08-SEP-21 01.30.36.784</td>
          <td style="text-align: left">1</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">5929</td>
          <td style="text-align: left">0</td>
          <td style="text-align: left">io done</td>
          <td style="text-align: left">19683</td>
          <td style="text-align: left">-1</td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left">08-SEP-21 01.30.36.784</td>
          <td style="text-align: left">1</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">5110</td>
          <td style="text-align: left">0</td>
          <td style="text-align: left">io done</td>
          <td style="text-align: left">3608</td>
          <td style="text-align: left">-1</td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left">08-SEP-21 01.30.36.784</td>
          <td style="text-align: left">1</td>
          <td style="text-align: left">g88w2u0ca2d3q</td>
          <td style="text-align: left">3971</td>
          <td style="text-align: left">-1</td>
          <td style="text-align: left">control file sequential read</td>
          <td style="text-align: left">134</td>
          <td style="text-align: left">11846794</td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left">08-SEP-21 01.30.36.784</td>
          <td style="text-align: left">1</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">5450</td>
          <td style="text-align: left">0</td>
          <td style="text-align: left">io done</td>
          <td style="text-align: left">5521</td>
          <td style="text-align: left">-1</td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left">08-SEP-21 01.30.37.355</td>
          <td style="text-align: left">2</td>
          <td style="text-align: left">215r28vsn4jjd</td>
          <td style="text-align: left">16462</td>
          <td style="text-align: left">-1</td>
          <td style="text-align: left">control file sequential read</td>
          <td style="text-align: left">9394</td>
          <td style="text-align: left">22</td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left">08-SEP-21 01.30.37.791</td>
          <td style="text-align: left">1</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">5110</td>
          <td style="text-align: left">0</td>
          <td style="text-align: left">io done</td>
          <td style="text-align: left">19253</td>
          <td style="text-align: left">-1</td>
          <td style="text-align: left"></td>
      </tr>
  </tbody>
</table> </div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="32-mapping-to-user-and-object-name"
    >
        3.2 Mapping to User and Object Name
    </h3>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#32-mapping-to-user-and-object-name" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 3.2 Mapping to User and Object Name" aria-label="Anchor to: 3.2 Mapping to User and Object Name" href="#32-mapping-to-user-and-object-name">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The user and object names can be simply joined, but only in the PDB:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">set</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="mi">400</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">set</span><span class="w"> </span><span class="n">pages</span><span class="w"> </span><span class="mi">100</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">column</span><span class="w"> </span><span class="n">sample_time</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">a22</span><span class="w"> </span><span class="n">tru</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">column</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">a30</span><span class="w"> </span><span class="n">tru</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">column</span><span class="w"> </span><span class="n">object_name</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">a30</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">sample_time</span><span class="p">,</span><span class="w"> </span><span class="n">inst_id</span><span class="p">,</span><span class="w"> </span><span class="n">sql_id</span><span class="p">,</span><span class="w"> </span><span class="n">session_id</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">username</span><span class="p">,</span><span class="w"> </span><span class="n">event</span><span class="p">,</span><span class="w"> </span><span class="n">time_waited</span><span class="p">,</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">c</span><span class="p">.</span><span class="n">object_name</span><span class="p">,</span><span class="w"> </span><span class="n">blocking_session</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">gv$active_session_history</span><span class="w"> </span><span class="n">a</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">join</span><span class="w"> </span><span class="n">dba_users</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">user_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">user_id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">join</span><span class="w"> </span><span class="n">dba_objects</span><span class="w"> </span><span class="k">c</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">current_obj</span><span class="o">#</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">object_id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">sample_time</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">sysdate</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">sysdate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p><strong>Sample Output:</strong></p>
<div class="table-wrap"> <table>
  <thead>
      <tr>
          <th style="text-align: left">SAMPLE_TIME</th>
          <th style="text-align: left">INST_ID</th>
          <th style="text-align: left">SQL_ID</th>
          <th style="text-align: left">SESSION_ID</th>
          <th style="text-align: left">USERNAME</th>
          <th style="text-align: left">EVENT</th>
          <th style="text-align: left">TIME_WAITED</th>
          <th style="text-align: left">OBJECT_NAME</th>
          <th style="text-align: left">BLOCKING_SESSION</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">08-SEP-21 12.47.37.202</td>
          <td style="text-align: left">1</td>
          <td style="text-align: left">1ps650r41s7qr</td>
          <td style="text-align: left">3894</td>
          <td style="text-align: left">BANCS_SUPPORT</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">0</td>
          <td style="text-align: left">IDX_ACC_PRF</td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left">08-SEP-21 12.47.41.229</td>
          <td style="text-align: left">1</td>
          <td style="text-align: left">1ps650r41s7qr</td>
          <td style="text-align: left">3894</td>
          <td style="text-align: left">BANCS_SUPPORT</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">0</td>
          <td style="text-align: left">IDX_ACC_PRF</td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left">08-SEP-21 12.47.42.235</td>
          <td style="text-align: left">1</td>
          <td style="text-align: left">1ps650r41s7qr</td>
          <td style="text-align: left">3894</td>
          <td style="text-align: left">BANCS_SUPPORT</td>
          <td style="text-align: left">gc cr multi block req</td>
          <td style="text-align: left">1007</td>
          <td style="text-align: left">IDX_ACC_PRF</td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left">08-SEP-21 12.47.43.240</td>
          <td style="text-align: left">1</td>
          <td style="text-align: left">1ps650r41s7qr</td>
          <td style="text-align: left">3894</td>
          <td style="text-align: left">BANCS_SUPPORT</td>
          <td style="text-align: left">db file scattered read</td>
          <td style="text-align: left">169</td>
          <td style="text-align: left">IDX_ACC_PRF</td>
          <td style="text-align: left"></td>
      </tr>
  </tbody>
</table> </div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="33-limiting-time-range"
    >
        3.3 Limiting Time Range
    </h3>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#33-limiting-time-range" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 3.3 Limiting Time Range" aria-label="Anchor to: 3.3 Limiting Time Range" href="#33-limiting-time-range">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The &ldquo;sample_time&rdquo; column can be used to limit the query period, allowing you to focus on the relevant part. This can be done relative to sysdate:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">where</span><span class="w"> </span><span class="n">sample_time</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">sysdate</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">sysdate</span><span class="w">
</span></span></span></code></pre></div><p>Or as a specific time range:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">where</span><span class="w"> </span><span class="n">sample_time</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">to_date</span><span class="p">(</span><span class="s1">&#39;25-Nov-2020 00:40:00&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;DD-Mon-YYYY HH24:MI:SS&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">and</span><span class="w"> </span><span class="n">to_date</span><span class="p">(</span><span class="s1">&#39;25-Nov-2020 00:50:00&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;DD-Mon-YYYY HH24:MI:SS&#39;</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></div><p>Or both combined:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">where</span><span class="w"> </span><span class="n">sample_time</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">to_date</span><span class="p">(</span><span class="s1">&#39;25-Nov-2020 00:40:00&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;DD-Mon-YYYY HH24:MI:SS&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">and</span><span class="w"> </span><span class="n">sysdate</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="34-limiting-number-of-rows"
    >
        3.4 Limiting Number of Rows
    </h3>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#34-limiting-number-of-rows" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 3.4 Limiting Number of Rows" aria-label="Anchor to: 3.4 Limiting Number of Rows" href="#34-limiting-number-of-rows">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>In one hour, ASH can record a huge number of rows, but often only the last 100 are of interest. To do this, reverse the sort order and limit the output with fetch:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">where</span><span class="w"> </span><span class="n">sample_time</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">sysdate</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">sysdate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">sample_time</span><span class="w"> </span><span class="k">desc</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">fetch</span><span class="w"> </span><span class="k">next</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">only</span><span class="w">
</span></span></span></code></pre></div><div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="35-drilldown"
    >
        3.5 Drilldown
    </h3>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#35-drilldown" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 3.5 Drilldown" aria-label="Anchor to: 3.5 Drilldown" href="#35-drilldown">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>With the basic script, you can get an overview of what was happening in the database during the selected period. The script can then be extended as needed to further narrow down the problem.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h4 id="351-blocking-session"
    >
        3.5.1 Blocking Session
    </h4>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#351-blocking-session" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 3.5.1 Blocking Session" aria-label="Anchor to: 3.5.1 Blocking Session" href="#351-blocking-session">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>If, for example, a blocking_session is responsible for many waits, you can look at this session in more detailthe number in the &ldquo;blocking_session&rdquo; column is the session_id of the blocking session:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">where</span><span class="w"> </span><span class="n">sample_time</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">sysdate</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">sysdate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">and</span><span class="w"> </span><span class="n">session_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123456</span><span class="w">
</span></span></span></code></pre></div><div class="flex align-center gdoc-page__anchorwrap">
    <h4 id="352-specific-query"
    >
        3.5.2 Specific Query
    </h4>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#352-specific-query" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 3.5.2 Specific Query" aria-label="Anchor to: 3.5.2 Specific Query" href="#352-specific-query">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>Similarly, if you want to look at a specific query, just filter by sql_id:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">where</span><span class="w"> </span><span class="n">sample_time</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">sysdate</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">sysdate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">and</span><span class="w"> </span><span class="n">sql_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1ps650r41s7qr&#39;</span><span class="w">
</span></span></span></code></pre></div><div class="flex align-center gdoc-page__anchorwrap">
    <h4 id="353-queries-of-a-plsql-procedure"
    >
        3.5.3 Queries of a PL/SQL Procedure
    </h4>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#353-queries-of-a-plsql-procedure" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 3.5.3 Queries of a PL/SQL Procedure" aria-label="Anchor to: 3.5.3 Queries of a PL/SQL Procedure" href="#353-queries-of-a-plsql-procedure">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>In OEM, you often only see the SQL_ID of the PL/SQL procedure among the top sessions. If you want to view all associated queries, filter by top_level_sql_id and specify the PL/SQL SQL_ID:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">where</span><span class="w"> </span><span class="n">sample_time</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">sysdate</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">sysdate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">and</span><span class="w"> </span><span class="n">top_level_sql_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1ps650r41s7qr&#39;</span><span class="w">
</span></span></span></code></pre></div><div class="flex align-center gdoc-page__anchorwrap">
    <h4 id="354-specific-events"
    >
        3.5.4 Specific Events
    </h4>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#354-specific-events" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 3.5.4 Specific Events" aria-label="Anchor to: 3.5.4 Specific Events" href="#354-specific-events">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>You can easily identify sessions affected by a specific wait using the Event column. A list of all possible wait events can be obtained with:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">wait_class</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">V$EVENT_NAME</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>Alternatively, you can list only the waits that actually occur in ASH:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">v$active_session_history</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>To filter for specific event types, extend the basic query, for example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">where</span><span class="w"> </span><span class="n">sample_time</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">sysdate</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">sysdate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">-- index contention
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">and</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;enq: TX - index contention&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">-- all transaction contentions
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">and</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;enq: TX%&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">-- read/write operations
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">and</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;db file%&#39;</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;direct path%&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">-- all cluster waits (full RAC)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">and</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;gc%&#39;</span><span class="w">
</span></span></span></code></pre></div><div class="flex align-center gdoc-page__anchorwrap">
    <h4 id="355-event-parameters"
    >
        3.5.5 Event Parameters
    </h4>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#355-event-parameters" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 3.5.5 Event Parameters" aria-label="Anchor to: 3.5.5 Event Parameters" href="#355-event-parameters">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>When searching for wait events, it&rsquo;s often useful to select the &ldquo;P1&rdquo; column (and possibly P2, P3). This provides additional info about the wait event, e.g., for Row Cache Locks, which DC Cache is involved. The columns &ldquo;P1TEXT&rdquo; (and P2TEXT, P3TEXT) give a descriptive name to the value. To see what the individual P-values mean, you can look at v$event_name:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">set</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="mi">400</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">col</span><span class="w"> </span><span class="n">parameter1</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">a20</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">col</span><span class="w"> </span><span class="n">parameter2</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">a20</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">col</span><span class="w"> </span><span class="n">parameter3</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">a20</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">parameter1</span><span class="p">,</span><span class="w"> </span><span class="n">parameter2</span><span class="p">,</span><span class="w"> </span><span class="n">parameter3</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">V$EVENT_NAME</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;row%lock&#39;</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p><strong>Sample Output:</strong></p>
<div class="table-wrap"> <table>
  <thead>
      <tr>
          <th style="text-align: left">NAME</th>
          <th style="text-align: left">PARAMETER1</th>
          <th style="text-align: left">PARAMETER2</th>
          <th style="text-align: left">PARAMETER3</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">row cache lock</td>
          <td style="text-align: left">cache id</td>
          <td style="text-align: left">mode</td>
          <td style="text-align: left">request</td>
      </tr>
  </tbody>
</table> </div>
<p>You can then extend the basic query accordingly:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">set</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="mi">400</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">set</span><span class="w"> </span><span class="n">pages</span><span class="w"> </span><span class="mi">100</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">column</span><span class="w"> </span><span class="n">sample_time</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">a22</span><span class="w"> </span><span class="n">tru</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">column</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">a30</span><span class="w"> </span><span class="n">tru</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">sample_time</span><span class="p">,</span><span class="w"> </span><span class="n">inst_id</span><span class="p">,</span><span class="w"> </span><span class="n">sql_id</span><span class="p">,</span><span class="w"> </span><span class="n">session_id</span><span class="p">,</span><span class="w"> </span><span class="n">user_id</span><span class="p">,</span><span class="w"> </span><span class="n">event</span><span class="p">,</span><span class="w"> </span><span class="n">p1text</span><span class="p">,</span><span class="w"> </span><span class="n">p1</span><span class="p">,</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">time_waited</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">gv$active_session_history</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">sample_time</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">sysdate</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">sysdate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">and</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;row%lock&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><div class="flex align-center gdoc-page__anchorwrap">
    <h4 id="356-other-useful-filters"
    >
        3.5.6 Other Useful Filters
    </h4>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#356-other-useful-filters" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 3.5.6 Other Useful Filters" aria-label="Anchor to: 3.5.6 Other Useful Filters" href="#356-other-useful-filters">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<ul>
<li>Waits over 1 second:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">and</span><span class="w"> </span><span class="n">time_waited</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1000000</span><span class="w">
</span></span></span></code></pre></div><ul>
<li>Sessions accessing a specific object:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">and</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">object_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;NAME_OF_OBJECT&#39;</span><span class="w">
</span></span></span></code></pre></div><ul>
<li>Sessions accessing a specific file:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">and</span><span class="w"> </span><span class="n">current_file</span><span class="o">#</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">134</span><span class="w">
</span></span></span></code></pre></div><ul>
<li>Sessions accessing the same block in the same file (e.g., in case of contention):</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">and</span><span class="w"> </span><span class="n">current_file</span><span class="o">#</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">134</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">and</span><span class="w"> </span><span class="n">current_block</span><span class="o">#</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123456</span><span class="w">
</span></span></span></code></pre></div><div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="36-more-ash-queries"
    >
        3.6 More ASH Queries
    </h3>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#36-more-ash-queries" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 3.6 More ASH Queries" aria-label="Anchor to: 3.6 More ASH Queries" href="#36-more-ash-queries">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>This is a list of further ASH queries that are not directly developed from the basic script above but are also very useful.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h4 id="361-pga-usage"
    >
        3.6.1 PGA Usage
    </h4>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#361-pga-usage" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 3.6.1 PGA Usage" aria-label="Anchor to: 3.6.1 PGA Usage" href="#361-pga-usage">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>With this query, you can check how much PGA each session_id has used:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">session_id</span><span class="p">,</span><span class="w"> </span><span class="n">session_serial</span><span class="o">#</span><span class="p">,</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">pga_allocated</span><span class="p">)</span><span class="o">/</span><span class="mi">1024</span><span class="o">/</span><span class="mi">1024</span><span class="o">/</span><span class="mi">1024</span><span class="w"> </span><span class="n">GB</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">v$active_session_history</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">sample_time</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">sysdate</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">sysdate</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">session_id</span><span class="p">,</span><span class="w"> </span><span class="n">session_serial</span><span class="o">#</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><div class="flex align-center gdoc-page__anchorwrap">
    <h4 id="362-temp-usage"
    >
        3.6.2 TEMP Usage
    </h4>
    <a data-clipboard-text="http://localhost:1313/oracle/ASH-HowTo/#362-temp-usage" class="gdoc-page__anchor clip flex align-center" title="Anchor to: 3.6.2 TEMP Usage" aria-label="Anchor to: 3.6.2 TEMP Usage" href="#362-temp-usage">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>Similarly, you can find the sessions that have used the most TEMP:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">session_id</span><span class="p">,</span><span class="w"> </span><span class="n">session_serial</span><span class="o">#</span><span class="p">,</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="n">temp_space_allocated</span><span class="p">)</span><span class="o">/</span><span class="mi">1024</span><span class="o">/</span><span class="mi">1024</span><span class="o">/</span><span class="mi">1024</span><span class="w"> </span><span class="n">GB</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">v$active_session_history</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">sample_time</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">sysdate</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">sysdate</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">session_id</span><span class="p">,</span><span class="w"> </span><span class="n">session_serial</span><span class="o">#</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><div style="text-align: center"></div>

  </article>



          
          
          <div class="gdoc-page__footer flex flex-wrap justify-between">
            
              








  
  

  
  
    

    
      
    

    
      
      

      
        
        
        
        

        
        

        

        

        

        
        
          
  
  

  
  
    

    
      
    

    
      
      

      
        
        
        
        

        
        

        

        
          
          
        

        
          
        

        
        
      
    

  

        
      
    
      
      

      
        
        
        
        

        
        

        
          
        

        

        

        
        
          
  
  

  
  
    

    
      
    

    
      
      

      
        
        
        
        

        
        

        
          
            
            
          
        

        

        
          
        

        
        
      
    
      
      

      
        
        
        
        

        
        

        

        

        
          
        

        
        
      
    

  

        
      
    
      
      

      
        
        
        
        

        
        

        

        

        

        
        
          
  
  

  
  
    

    
      
    

    
      
      

      
        
        
        
        

        
        

        

        

        
          
        

        
        
      
    

  

        
      
    

  




<span class="gdoc-page__nav">
  
</span>
<span class="gdoc-page__nav">
  
    <a
      class="gdoc-page__nav--next flex align-center"
      href="/postgres/pgbench/"
      title="pgbench"
    >
      pgbench
      <i class="gdoc-icon">gdoc_arrow_right_alt</i>
    </a>
  
</span>

            
          </div>
          
        </div>
      </main>

      <footer class="gdoc-footer">
  <nav class="container flex">
    <div>
      <section class="flex flex-wrap align-center">
        <span class="gdoc-footer__item gdoc-footer__item--row">
          Built with <a href="https://gohugo.io/" class="gdoc-footer__link">Hugo</a> and <svg class="gdoc-icon gdoc_heart"><use xlink:href="#gdoc_heart"></use></svg>

        </span>
        
        
      </section>
      
    </div>
    
      <div class="flex flex-25 justify-end">
        <span class="gdoc-footer__item text-right">
          <a class="gdoc-footer__link fake-link" href="#" aria-label="Back to top">
            <svg class="gdoc-icon gdoc_keyboard_arrow_up">
              <use xlink:href="#gdoc_keyboard_arrow_up"></use>
            </svg>
            <span class="hidden-mobile">Back to top</span>
          </a>
        </span>
      </div>
    
  </nav>
</footer>

    </div>

    
  <script defer src="/js/search-16a110ff.bundle.min.js"></script>

  </body>
</html>
